!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e){e.exports=JSON.parse('{"number":{"type":"number","default":10},"columns":{"type":"number","default":1},"sticky":{"type":"boolean","default":false},"type":{"type":"string","default":"post"},"page":{"type":"array","default":[],"items":{"type":"number"}},"pageChildren":{"type":"boolean","default":false},"taxonomy":{"type":"string","default":""},"term":{"type":"array","default":[],"items":{"type":"number"}},"filter":{"type":"boolean","default":false},"filterBy":{"type":"string","default":""},"filterType":{"type":"string","default":"is"},"filterValue":{"type":"string","default":""},"order":{"type":"string","default":"ASC"},"orderBy":{"type":"string","default":"ID"},"orderMeta":{"type":"string","default":""}}')},function(e,t,n){var r=n(17),o=n(18),l=n(7),a=n(19);e.exports=function(e,t){return r(e)||o(e,t)||l(e,t)||a()}},function(e,t,n){var r=n(14),o=n(15),l=n(7),a=n(16);e.exports=function(e){return r(e)||o(e)||l(e)||a()}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t){!function(){e.exports=this.wp.serverSideRender}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t,n){var r=n(6);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,l=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,l=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw l}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(8),l=n(1),a=n(5),i=n.n(a),u=n(9),c=n.n(u),s=n(4),f=n.n(s),p=n(10),b=n(11),d=n.n(b),m=n(12),y=n(2),g=[{value:"is",label:Object(r.__)("Is equal to","postie")},{value:"not",label:Object(r.__)("Is not equal to","postie")},{value:"lt",label:Object(r.__)("Is less than","postie")},{value:"gt",label:Object(r.__)("Is greater than","postie")},{value:"lte",label:Object(r.__)("Is less than or equal to","postie")},{value:"gte",label:Object(r.__)("Is greater than or equal to","postie")}],O=[{value:"ID",label:Object(r.__)("ID","postie")},{value:"date",label:Object(r.__)("Publish Date","postie")},{value:"modified",label:Object(r.__)("Modified Date","postie")},{value:"title",label:Object(r.__)("Title","postie")},{value:"name",label:Object(r.__)("Slug","postie")},{value:"menu_order",label:Object(r.__)("Menu Order","postie")},{value:"rand",label:Object(r.__)("Random","postie")},{value:"meta",label:Object(r.__)("Custom Field","postie")}],_=[{value:"ASC",label:Object(r.__)("Ascending","postie")},{value:"DESC",label:Object(r.__)("Descending","postie")}],j=n(13),v=n.n(j);function h(e){return v()({path:"/postie/".concat(e)})}function C(e){return new URLSearchParams(e).toString()}var x=n(3);Object(o.registerBlockType)("lambry/postie",{icon:function(){return Object(l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(l.createElement)("path",{"fill-rule":"evenodd",d:"M11,4 L4,4 L4,20 L11,20 L11,10 L4,10 L4,8 L11,8 L11,4 Z M13,4 L13,14 L20,14 L20,16 L13,16 L13,20 L20,20 L20,4 L13,4 Z M4,2 L20,2 C21.1045695,2 22,2.8954305 22,4 L22,20 C22,21.1045695 21.1045695,22 20,22 L4,22 C2.8954305,22 2,21.1045695 2,20 L2,4 C2,2.8954305 2.8954305,2 4,2 Z"}))},title:Object(r.__)("Postie","postie"),description:Object(r.__)("Posts, pages and custom types.","postie"),attributes:x,category:"widgets",supports:{align:!0,html:!1},edit:function(e){var t=e.attributes,n=e.setAttributes,o=t.number,a=t.columns,u=t.sticky,s=t.type,b=t.page,j=t.pageChildren,v=t.taxonomy,S=t.term,E=t.filter,w=t.filterBy,L=t.filterType,T=t.filterValue,I=t.order,P=t.orderBy,M=t.orderMeta,k=Object(p.useSelect)((function(e){return e("core").getPostTypes()}))||[],A=Object(l.useState)([]),B=f()(A,2),F=B[0],D=B[1],R=Object(l.useState)([]),q=f()(R,2),V=q[0],Z=q[1],N=Object(l.useState)([]),U=f()(N,2),J=U[0],$=U[1],z=Object(l.useState)([]),G=f()(z,2),H=G[0],K=G[1];Object(l.useEffect)((function(){s&&h("taxonomies/".concat(s)).then(Z),"page"===s&&h("pages").then(D),v&&h("terms/".concat(v)).then($),("meta"===P||E)&&h("fields/?".concat(C(t))).then(K)}),[]);var Q=function(e,t,r){n(c()({},t,e.map((function(e){var t;return null===(t=r.find((function(t){var n=t.id;return t.value===e||n===e.id})))||void 0===t?void 0:t.id}))))},W=function(e,t){return e.map((function(e){var n;return{id:e,value:null===(n=t.find((function(t){return t.id===e})))||void 0===n?void 0:n.value}}))};return Object(l.createElement)(l.Fragment,null,Object(l.createElement)(m.InspectorControls,null,Object(l.createElement)(y.PanelBody,{title:Object(r.__)("Display","postie")},("page"!==s||!b.length)&&Object(l.createElement)(y.RangeControl,{min:1,max:100,label:Object(r.__)("Number","postie"),value:o,onChange:function(e){return n({number:e})}}),Object(l.createElement)(y.RangeControl,{min:1,max:6,label:Object(r.__)("Columns","postie"),value:a,onChange:function(e){return n({columns:e})}}),"page"!==s&&Object(l.createElement)(y.ToggleControl,{label:Object(r.__)("Include sticky posts","postie"),checked:u,onChange:function(){return n({sticky:!u})}})),Object(l.createElement)(y.PanelBody,{title:Object(r.__)("Source","postie")},Object(l.createElement)(y.SelectControl,{label:Object(r.__)("Post Type","postie"),value:s,options:k.map((function(e){return{label:e.name,value:e.slug}})),onChange:function(e){return function(e){n({type:e,term:x.term.default,taxonomy:x.taxonomy.default}),h("taxonomies/".concat(e)).then(Z),"page"===e&&h("pages").then(D)}(e)}}),"page"===s&&Object(l.createElement)(y.FormTokenField,{label:Object(r.__)("Pages","postie"),value:W(b,F),suggestions:F.map((function(e){return e.value})),onChange:function(e){return Q(e,"page",F)}}),"page"===s&&Object(l.createElement)(y.ToggleControl,{label:Object(r.__)("Show children","postie"),checked:j,onChange:function(){return n({pageChildren:!j})}}),s&&!!V.length&&Object(l.createElement)(y.SelectControl,{label:Object(r.__)("Taxonomy","postie"),value:v,options:[{label:Object(r.__)("Select taxonomy","postie"),value:""}].concat(i()(V)),onChange:function(e){return function(e){if(n({taxonomy:e,term:x.term.default}),!e)return $([]);h("terms/".concat(e)).then($)}(e)}}),v&&!!J.length&&Object(l.createElement)(y.FormTokenField,{label:Object(r.__)("Terms","postie"),value:W(S,J),suggestions:J.map((function(e){return e.value})),onChange:function(e){return Q(e,"term",J)}}),Object(l.createElement)(y.ToggleControl,{label:Object(r.__)("Filter by custom field","postie"),checked:E,onChange:function(){return E||h("fields/?".concat(C(t))).then(K),void n({filter:!E})}}),E&&Object(l.createElement)(y.SelectControl,{label:Object(r.__)("Custom Field","postie"),value:w,options:[{label:Object(r.__)("Select field","postie"),value:""}].concat(i()(H)),onChange:function(e){return function(e){n({filterBy:e}),"string"!==e.split("::")[1]||["is","not"].includes(L)||n({filterType:"is"})}(e)}}),E&&w&&Object(l.createElement)(y.SelectControl,{label:Object(r.__)("Filter method","postie"),value:L,options:g.filter((function(e){var t=e.value;return"int"===w.split("::")[1]||["is","not"].includes(t)})),onChange:function(e){return n({filterType:e})}}),E&&w&&Object(l.createElement)(y.TextControl,{label:Object(r.__)("Filter Value","postie"),value:T,onChange:function(e){return n({filterValue:e})}})),Object(l.createElement)(y.PanelBody,{title:Object(r.__)("Order","postie")},Object(l.createElement)(y.SelectControl,{label:Object(r.__)("Order By","postie"),value:P,options:O,onChange:function(e){return function(e){n({orderBy:e}),"meta"===e?h("fields/?".concat(C(t))).then(K):n({orderMeta:x.orderMeta.default})}(e)}}),"meta"===P&&Object(l.createElement)(y.SelectControl,{label:Object(r.__)("Custom Field","postie"),value:M,options:[{label:Object(r.__)("Select field","postie"),value:""}].concat(i()(H)),onChange:function(e){return n({orderMeta:e})}}),"rand"!==P&&Object(l.createElement)(y.SelectControl,{label:Object(r.__)("Sort Order","postie"),value:I,options:_,onChange:function(e){return n({order:e})}}))),Object(l.createElement)(d.a,{block:"lambry/postie",attributes:t}))},save:function(){return null}})}]);